<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DASBEM Loader</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #050505;
  --text: #39ff14;
  --accent: #ffaa33;
  --highlight: #00ffcc;
}
html, body {
  margin: 0; padding: 0;
  width: 100%; height: 100%;
  background: var(--bg);
  color: var(--text);
  font-family: 'Share Tech Mono', monospace;
  overflow: hidden;
}

/* Container */
#loaderContainer {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  height: 100%;
  width: 100%;
  padding: 20px;
  box-sizing: border-box;
  z-index: 2;
}

/* Header Title */
#header {
  font-size: 1.3rem;
  color: var(--accent);
  letter-spacing: 1px;
  margin-bottom: 10px;
  animation: flicker 2s infinite;
}

/* Log Console */
#log {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  font-size: 0.85rem;
  line-height: 1.2rem;
  white-space: pre;
}

/* Individual lines */
.logLine {
  opacity: 0;
  animation: fadeIn 0.15s linear forwards;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(3px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Progress bar */
.progressBarContainer {
  width: 100%;
  height: 18px;
  background: rgba(255,255,255,0.08);
  border-radius: 8px;
  overflow: hidden;
  margin-top: 10px;
}
.progressBar {
  width: 0%;
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--highlight));
  box-shadow: 0 0 6px var(--highlight);
  transition: width 0.12s linear;
}

/* Grid animation background */
.grid {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background-image:
    linear-gradient(rgba(0,255,0,0.07) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,255,0,0.07) 1px, transparent 1px);
  background-size: 20px 20px;
  animation: gridMove 3s linear infinite;
  z-index: 0;
}
@keyframes gridMove {
  0% { background-position: 0 0; }
  100% { background-position: 20px 20px; }
}

/* Subtle glow wave effect */
.glowWave {
  position: absolute;
  bottom: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle at 50% 120%, rgba(0,255,0,0.1), transparent 70%);
  animation: pulseWave 6s ease-in-out infinite;
  z-index: 0;
}
@keyframes pulseWave {
  0%,100% { transform: translateY(0) scale(1); opacity: 0.5; }
  50% { transform: translateY(-10%) scale(1.05); opacity: 1; }
}

/* Text flicker animation */
@keyframes flicker {
  0%, 18%, 22%, 25%, 53%, 57%, 100% { opacity: 1; }
  20%, 24%, 55% { opacity: 0.5; }
}

/* Mobile Optimization */
@media(max-width: 640px) {
  #header { font-size: 1.1rem; text-align: center; }
  #log { font-size: 0.7rem; }
  .progressBarContainer { height: 14px; }
  #loaderContainer { padding: 12px; }
}
</style>
</head>
<body>
<div class="grid"></div>
<div class="glowWave"></div>

<div id="loaderContainer">
  <div id="header">Initializing DASBEM Time-Domain Boundary Element Core...</div>
  <div id="log"></div>
  <div class="progressBarContainer"><div class="progressBar" id="progressBar"></div></div>
</div>

<script>
// Tehran time for timestamps
function tehranTime() {
  const now = new Date();
  const utc = now.getTime() + now.getTimezoneOffset() * 60000;
  return new Date(utc + 3.5 * 60 * 60 * 1000);
}
function timeStamp() {
  const t = tehranTime();
  return `[${('0'+t.getHours()).slice(-2)}:${('0'+t.getMinutes()).slice(-2)}:${('0'+t.getSeconds()).slice(-2)}]`;
}

// Technical HSTD-BEM process logs
const technicalPhrases = [
  "Allocating memory for half-space Greenâ€™s function kernels...",
  "Computing convolution integrals for transient SH-waves...",
  "Initializing temporal boundary discretization...",
  "Transforming boundary coordinates to local reference frame...",
  "Assembling time-domain BIE coefficients...",
  "Performing fast convolution acceleration (FCA)...",
  "Applying topographic boundary conditions (Free Surface)...",
  "Evaluating elastodynamic influence matrices...",
  "Integrating fundamental solutions via Gaussian quadrature...",
  "Optimizing recursive convolution scheme...",
  "Synchronizing subdomain time-step solvers...",
  "Updating displacement boundary vectors...",
  "Assembling modified dynamic stiffness matrices...",
  "Validating half-space radiation condition...",
  "Performing LU factorization of influence matrix...",
  "Storing system response at output nodes...",
  "Post-processing amplification factors...",
  "Exporting computed motion history to /output/DASBEM_run.dat",
  "System Ready for Visualization Interface..."
];

const logEl = document.getElementById("log");
const progressEl = document.getElementById("progressBar");

let totalLines = 500;
let displayed = 0;
let totalDuration = 5000;
let intervalTime = totalDuration / totalLines;

function appendLog(text) {
  const line = document.createElement("div");
  line.className = "logLine";
  line.textContent = `${timeStamp()} ${text}`;
  logEl.appendChild(line);
  logEl.scrollTop = logEl.scrollHeight;
}

function randomPhrase() {
  return technicalPhrases[Math.floor(Math.random() * technicalPhrases.length)];
}

function startLoader() {
  const interval = setInterval(() => {
    appendLog(randomPhrase());
    displayed++;
    let percent = Math.min(100, (displayed / totalLines) * 100);
    progressEl.style.width = percent + "%";

    if (displayed >= totalLines) {
      clearInterval(interval);
      setTimeout(() => {
        appendLog(">>> Transitioning to DASBEM Main Interface...");
        progressEl.style.width = "100%";
        setTimeout(() => window.location.href = "index.html", 1000);
      }, 400);
    }
  }, intervalTime);
}

startLoader();
</script>
</body>
</html>
