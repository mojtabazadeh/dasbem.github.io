<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DASBEM Loader</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#050505;
    --text:#39ff14;
    --accent:#ff9900;
    --gold:#ffcc33;
  }
  *{box-sizing:border-box;}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:'Share Tech Mono',monospace;overflow-x:hidden;}
  #app{position:relative;height:100%;width:100%;padding:18px;display:flex;flex-direction:column;gap:12px;}
  #header{font-size:17px;color:var(--accent);letter-spacing:1px;user-select:none;-webkit-user-select:none;max-width:100%;overflow:hidden;white-space:nowrap;}
  .viewport{flex:1;min-height:120px;max-height:calc(100% - 140px);overflow-y:auto;padding:10px 12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border-radius:8px;border:1px solid rgba(255,255,255,0.03);}
  .logLine{font-size:13px;line-height:1.25;margin:4px 0;opacity:0;transform:translateY(4px);transition:opacity .12s linear, transform .12s linear;max-width:100%;word-break:break-word;white-space:pre-wrap;display:block;}
  .logLine.visible{opacity:1; transform:translateY(0);}
  .finalLine{color:var(--gold);font-weight:700;font-size:15px;margin-top:8px;padding:6px 8px;border-radius:6px;background:linear-gradient(90deg, rgba(255,204,51,0.04), transparent);}
  .progressWrap{height:16px;background:rgba(255,255,255,0.06);border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);}
  .progressBar{height:100%;width:0;background:linear-gradient(90deg,#ff9900,#ffcc33);transition:width 80ms linear;}
  @media (max-width:640px){#app{padding:12px}#header{font-size:15px}.logLine{font-size:12px;margin:6px 0}.progressWrap{height:14px}}
  body.fade-in {animation:fadeIn 0.8s forwards;} @keyframes fadeIn{from{opacity:0} to{opacity:1}}
</style>
</head>
<body>
<div id="app" role="main">
  <div id="header">Initializing DASBEM Core...</div>
  <div class="viewport" id="viewport"></div>
  <div class="progressWrap"><div class="progressBar" id="progressBar"></div></div>
</div>

<script>
const TOTAL_DURATION = 3000;
const TOTAL_LINES = 180;
const REDIRECT = "index.html"; // صفحه اصلی سایت

const viewport = document.getElementById('viewport');
const progressBar = document.getElementById('progressBar');
const header = document.getElementById('header');

// فایل‌ها و فرمت‌های مرموز و علمی
const mysteriousFiles = [
  "HS-BEM_kernel.fem","transient_SHwave.dat","boundary_patch_X01.bem",
  "subdomain_solver_A03.bin","stiffness_Kij.matrix","amplification_STA23.out",
  "recursive_dt_0.35ms.sim","convolution_chunk_12.tmp","resp_102345.bin",
  "spectral_amp_F12Hz.spc","motion_segment_23.hist","numerical_module_core.mod",
  "boundary_matrix_edge4.bem","dynamic_eq_dof_3-12.vec","memory_heap_4096MB.mem",
  "domain_constraints_BSET12.cfg","influence_range_12-256.dat","output_run_2048.out"
];

function rnd(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }
function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

function makeLine(){
  const file = pick(mysteriousFiles);
  const percent = rnd(1,100);
  return `Loading ${file} ... ${percent}%`;
}

// زمان‌بندی خطوط
const timestamps = [];
for(let i=0;i<TOTAL_LINES;i++){
  timestamps.push(Math.round((i/TOTAL_LINES)*TOTAL_DURATION));
}

let startedAt = performance.now();
function updateProgress(){
  const elapsed = performance.now() - startedAt;
  const pct = Math.min(100, Math.round((elapsed/TOTAL_DURATION)*100));
  progressBar.style.width = pct + "%";
}

function pushLine(text, final=false){
  const el = document.createElement('div');
  el.className = 'logLine';
  el.textContent = text;
  if(final) el.classList.add('finalLine');
  viewport.appendChild(el);
  requestAnimationFrame(()=> el.classList.add('visible'));
  viewport.scrollTop = viewport.scrollHeight;
}

function startEmission(){
  startedAt = performance.now();
  updateProgress();
  for(let i=0;i<TOTAL_LINES;i++){
    setTimeout(()=>{
      pushLine(makeLine());
    }, timestamps[i]);
  }
  // خط نهایی و ورود به سایت
  setTimeout(()=>{
    pushLine("DASBEM Protocol Engaged.", true);
    progressBar.style.width = "100%";
    setTimeout(()=> enterSite(), 400);
  }, TOTAL_DURATION);
}

function enterSite(){
  document.body.classList.add('fade-in');
  window.location.href = REDIRECT;
}

startEmission();
</script>
</body>
</html>
