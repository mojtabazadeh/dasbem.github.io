<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>شبکه علمی دکتر سعید مجتبی‌زاده</title>
  <style>
    body,html{
      margin:0;padding:0;height:100%;font-family:"Tahoma",sans-serif;
      background:#0f172a;color:#fff;overflow-x:hidden;
    }
    #particles-js{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;}
    header{padding:20px;text-align:center;font-size:22px;font-weight:bold;}
    .paper-list{display:grid;gap:20px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));padding:20px;}
    .paper{background:#1e293b;border-radius:12px;padding:16px;box-shadow:0 4px 12px rgba(0,0,0,0.4);}
    .thumb{cursor:pointer;overflow:hidden;border-radius:8px;margin-bottom:10px;}
    .thumb img{width:100%;display:block;opacity:0;transition:opacity .5s;}
    .thumb img.loaded{opacity:1;}
    .p-title{font-size:16px;font-weight:600;margin-bottom:6px;}
    .p-auth{font-size:13px;color:#94a3b8;}
    .year{float:left;font-weight:bold;}
    .download-btn,.journal-btn{
      display:inline-block;margin-top:10px;margin-right:5px;padding:6px 12px;
      border-radius:6px;font-size:13px;text-decoration:none;color:#fff;
    }
    .download-btn{background:#2563eb;}
    .journal-btn{background:#059669;}
    /* پاپ‌آپ */
    .wizard{
      position:fixed;background:rgba(0,0,0,.7);top:0;left:0;width:100%;height:100%;
      display:none;align-items:center;justify-content:center;z-index:1000;
    }
    .wizard.show{display:flex;}
    .wizard-content{
      background:#fff;color:#000;padding:20px;border-radius:12px;max-width:500px;
      max-height:70vh;overflow-y:auto;position:relative;line-height:1.8;
      box-shadow:0 8px 20px rgba(0,0,0,.5);
    }
    .wizard-content img{width:100%;margin-bottom:10px;border-radius:8px;}
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <header>شبکه علمی دکتر سعید مجتبی‌زاده</header>
  <div class="paper-list" id="list"></div>

  <!-- پاپ‌آپ -->
  <div id="wizard" class="wizard" aria-hidden="true">
    <div class="wizard-content">
      <div id="wThumb"></div>
      <div id="wBody"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/particles.js"></script>
  <script>
    // تنظیمات ذرات
    particlesJS("particles-js", {
      particles:{number:{value:80},size:{value:3},move:{speed:2},
      line_linked:{enable:true,distance:150,color:"#ffffff"},color:{value:"#ffffff"}}
    });

    const papers=[
      {
        title:"تحلیل لرزه‌ای سطح درّه نیم‌دایره‌ای",
        authors:"مجتبی‌زاده و همکاران",
        year:"2025",
        thumb:"https://via.placeholder.com/400x200.png?text=Paper+1",
        href:"#",
        journal:"#",
        abstract:"در این پژوهش، به تحلیل لرزه‌ای سطح درّه‌ی نیم‌دایره‌ای واقع بر یک نیم‌فضای اورتوتروپ در برابر امواج مهاجم SH پرداخته شده است..."
      },
      {
        title:"Seismic Response of Semi-Circular Valleys",
        authors:"Mojtabazadeh et al.",
        year:"2024",
        thumb:"https://via.placeholder.com/400x200.png?text=Paper+2",
        href:"#",
        journal:"#",
        abstract:"This study investigates the seismic response of a semi-circular valley resting on an orthotropic half-space subjected to incident SH waves..."
      }
    ];

    const list=document.getElementById("list");
    const wizard=document.getElementById("wizard");
    const wThumb=document.getElementById("wThumb");
    const wBody=document.getElementById("wBody");

    function positionWizard(x,y){
      if(window.innerWidth<=768){
        // 📱 در موبایل: وسط‌چین
        wizard.style.justifyContent="center";
        wizard.style.alignItems="center";
      }else{
        // 💻 در دسکتاپ: کنار ماوس
        const wRect=wizard.getBoundingClientRect();
        let left=x+18, top=y+12;
        if(left+wRect.width>window.innerWidth) left=x-wRect.width-18;
        if(top+wRect.height>window.innerHeight) top=y-wRect.height-18;
        wizard.style.justifyContent="flex-start";
        wizard.style.alignItems="flex-start";
        wizard.firstElementChild.style.marginLeft=left+"px";
        wizard.firstElementChild.style.marginTop=top+"px";
      }
    }

    papers.forEach(p=>{
      const node=document.createElement("div"); node.className="paper";
      node.innerHTML=`
        <div class="thumb"><img src="${p.thumb}" alt=""></div>
        <div class="p-title">${p.title}</div>
        <div class="p-auth">${p.authors}<span class="year">${p.year}</span></div>
        <div>
          <a href="${p.href}" target="_blank" class="download-btn">📥 Download</a>
          <a href="${p.journal}" target="_blank" class="journal-btn">🌐 Link</a>
        </div>`;
      const img=node.querySelector("img");
      img.addEventListener("load",()=>img.classList.add("loaded"));
      const thumb=node.querySelector(".thumb");

      // باز کردن پاپ‌آپ
      thumb.addEventListener("click",(ev)=>{
        wThumb.innerHTML=`<img src="${p.thumb}" alt="">`;
        wBody.textContent=p.abstract;
        positionWizard(ev.clientX+18,ev.clientY+12);
        wizard.classList.add("show"); wizard.setAttribute("aria-hidden","false");
      });

      // حرکت موس در دسکتاپ
      thumb.addEventListener("mousemove",(ev)=>{
        if(window.innerWidth>768) positionWizard(ev.clientX+18,ev.clientY+12);
      });

      list.appendChild(node);
    });

    // بستن پاپ‌آپ با لمس روی آن
    wizard.addEventListener("click",(e)=>{
      if(e.target===wizard||e.target===wThumb||e.target===wBody){
        wizard.classList.remove("show"); wizard.setAttribute("aria-hidden","true");
      }
    });
  </script>
</body>
</html>
