<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DASBEM Loader</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#1a1a1a;
  --text:#fff;
  --accent:#ffb347;
  --highlight:#ffcc33;
  --muted:rgba(255,255,255,0.08);
}
body, html{
  margin:0;padding:0;width:100%;height:100%;background:var(--bg);color:var(--text);
  font-family:'Share Tech Mono', monospace;overflow:hidden;
}
#loaderApp{
  position:relative;width:100%;height:100%;display:flex;flex-direction:column;padding:20px;
}
#header{
  font-size:18px;color:var(--accent);letter-spacing:1px;user-select:none;
  margin-bottom:12px;
}
.viewport{
  flex:1;overflow-y:auto;padding:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  border-radius:8px;border:1px solid var(--muted);
}
.logLine{font-size:13px;line-height:1.25;margin:6px 0;opacity:0;transform:translateY(4px);transition:opacity .12s linear, transform .12s linear;white-space:pre-wrap;}
.logLine.visible{opacity:1;transform:translateY(0);}
.finalLine{color:var(--highlight);font-weight:700;font-size:15px;text-shadow:0 0 6px rgba(255,204,51,0.14);margin-top:8px;padding:6px 8px;border-radius:6px;background:linear-gradient(90deg, rgba(255,204,51,0.04), transparent);}
.progressWrap{height:16px;background:var(--muted);border-radius:10px;overflow:hidden;border:1px solid var(--muted);margin-top:10px;}
.progressBar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--highlight));transition:width 80ms linear;}
</style>
</head>
<body>
<div id="loaderApp">
  <div id="header">Initializing DASBEM Core...</div>
  <div class="viewport" id="viewport"></div>
  <div class="progressWrap">
    <div class="progressBar" id="progressBar"></div>
  </div>
</div>
<script>
const viewport = document.getElementById('viewport');
const progressBar = document.getElementById('progressBar');
const header = document.getElementById('header');

const templates = [
  "Loading boundary element kernel '{mod}'...",
  "Allocating computational buffer #{buf}...",
  "Processing SH-wave frame {frm}...",
  "Synchronizing solver thread {th}...",
  "Updating displacement vector DOF={dof}...",
  "Applying boundary matrix at edge {edge}...",
  "Integrating fundamental solution with GQ={gq}...",
  "Storing temporary output /tmp/res_{idx}.bin...",
  "Validating half-space radiation...",
  "Optimizing convolution window (win={win}ms)..."
];

function rnd(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
function pick(arr){return arr[Math.floor(Math.random()*arr.length)];}
function makeLine(i){
  const tpl = pick(templates);
  return tpl.replace(/\{([^\}]+)\}/g,(_,t)=>{
    switch(t){
      case 'mod': return pick(['core','conv','solver','post']);
      case 'buf': return rnd(1,9999);
      case 'frm': return rnd(0,99999);
      case 'th': return rnd(1,16);
      case 'dof': return rnd(1,6)+'-'+rnd(1,999);
      case 'edge': return rnd(0,7);
      case 'gq': return rnd(8,48);
      case 'win': return rnd(10,800);
      case 'idx': return rnd(100000,999999);
      default: return rnd(0,9999);
  }})+` /* line ${i} */`;
}

let lineIndex = 0;
const totalLines = 100;
function emitLine(){
  if(lineIndex >= totalLines){
    const final = document.createElement('div');
    final.className='logLine finalLine visible';
    final.textContent = "DASBEM protocol engaged.";
    viewport.appendChild(final);
    progressBar.style.width = '100%';
    viewport.scrollTop = viewport.scrollHeight;
    return;
  }
  const line = document.createElement('div');
  line.className = 'logLine';
  line.textContent = makeLine(lineIndex+1);
  viewport.appendChild(line);
  requestAnimationFrame(()=>line.classList.add('visible'));
  lineIndex++;
  progressBar.style.width = `${Math.floor((lineIndex/totalLines)*100)}%`;
  viewport.scrollTop = viewport.scrollHeight;
  setTimeout(emitLine, rnd(15,40));
}

emitLine();
</script>
</body>
</html>
