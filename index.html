<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DASBEM Loader</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #050505;
  --text: #39ff14;
  --accent: #ff9900; /* پایه نارنجی */
  --highlight: #ff6600;
}
html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  background: var(--bg);
  color: var(--text);
  font-family:'Share Tech Mono', monospace;
  overflow:hidden;
}

#loaderContainer {
  position:relative;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  height:100%;
  width:100%;
  padding:20px;
  box-sizing:border-box;
  z-index:2;
}

#header {
  font-size:1.3rem;
  color:var(--accent);
  letter-spacing:1px;
  margin-bottom:10px;
  animation: flicker 2s infinite;
}

#log {
  flex:1;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  font-size:0.85rem;
  line-height:1.2rem;
  white-space:pre;
}

.logLine {
  opacity:0;
  animation: fadeIn 0.12s linear forwards;
}

.finalLine {
  color:#ff3300;
  font-weight:bold;
  font-size:1rem;
  text-shadow:0 0 6px #ff6600,0 0 12px #ff3300;
  margin-top:5px;
  animation: finalGlow 1.2s ease-in-out infinite alternate;
}

@keyframes fadeIn {
  from {opacity:0; transform:translateY(3px);}
  to {opacity:1; transform:translateY(0);}
}

@keyframes finalGlow {
  0% { text-shadow:0 0 4px #ff6600,0 0 8px #ff3300; }
  50% { text-shadow:0 0 10px #ff6600,0 0 20px #ff3300; }
  100% { text-shadow:0 0 4px #ff6600,0 0 8px #ff3300; }
}

.progressBarContainer {
  width:100%;
  height:18px;
  background:rgba(255,255,255,0.08);
  border-radius:8px;
  overflow:hidden;
  margin-top:10px;
}

.progressBar {
  width:0;
  height:100%;
  background:linear-gradient(90deg, #ff9900, #ff6600);
  box-shadow:0 0 8px #ff6600;
  transition: width 0.04s linear;
  animation: flickerBar 0.15s infinite;
}

@keyframes flickerBar {
  0%,100% { filter: brightness(1); }
  50% { filter: brightness(1.3); }
}

.grid {
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  background-image:
    linear-gradient(rgba(255,153,0,0.08) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,102,0,0.08) 1px, transparent 1px);
  background-size:20px 20px;
  animation:gridMove 3s linear infinite;
  z-index:0;
}

@keyframes gridMove {
  0% { background-position:0 0;}
  100% { background-position:20px 20px;}
}

.glowWave {
  position:absolute;
  bottom:-50%;
  width:200%;
  height:200%;
  background:radial-gradient(circle at 50% 120%, rgba(255,153,0,0.12), transparent 70%);
  animation:pulseWave 6s ease-in-out infinite;
  z-index:0;
}

@keyframes pulseWave {
  0%,100% { transform:translateY(0) scale(1); opacity:0.5; }
  50% { transform:translateY(-10%) scale(1.05); opacity:1; }
}

@keyframes flicker {
  0%,18%,22%,25%,53%,57%,100% { opacity:1; }
  20%,24%,55% { opacity:0.5; }
}

@media(max-width:640px){
  #header { font-size:1.1rem; text-align:center;}
  #log { font-size:0.7rem;}
  .progressBarContainer{height:14px;}
  #loaderContainer{padding:12px;}
}
</style>
</head>
<body>
<div class="grid"></div>
<div class="glowWave"></div>

<div id="loaderContainer">
  <div id="header">Initializing The DASBEM Project Core...</div>
  <div id="log"></div>
  <div class="progressBarContainer"><div class="progressBar" id="progressBar"></div></div>
</div>

<script>
function tehranTime(){
  const now = new Date();
  const utc = now.getTime() + now.getTimezoneOffset()*60000;
  return new Date(utc + 3.5*60*60*1000);
}
function timeStamp(){
  const t = tehranTime();
  return `[${('0'+t.getHours()).slice(-2)}:${('0'+t.getMinutes()).slice(-2)}:${('0'+t.getSeconds()).slice(-2)}]`;
}

const technicalPhrases=[
  "Allocating half-space Green’s kernels...",
  "Computing convolution integrals for transient SH-waves...",
  "Initializing temporal boundary discretization...",
  "Transforming coordinates to local reference frame...",
  "Assembling time-domain BIE coefficients...",
  "Performing fast convolution acceleration...",
  "Applying free-surface boundary conditions...",
  "Evaluating elastodynamic influence matrices...",
  "Integrating fundamental solutions via Gaussian quadrature...",
  "Optimizing recursive convolution scheme...",
  "Synchronizing subdomain time-step solvers...",
  "Updating displacement boundary vectors...",
  "Assembling dynamic stiffness matrices...",
  "Validating half-space radiation condition...",
  "LU factorization of influence matrix...",
  "Storing system response at output nodes...",
  "Post-processing amplification factors...",
  "Exporting motion history to /output/DASBEM_run.dat"
];

const logEl=document.getElementById("log");
const progressEl=document.getElementById("progressBar");

let totalLines=400; // کاهش برای 3 ثانیه روان
let displayed=0;
let totalDuration=3000; // 3 ثانیه
let intervalTime=totalDuration/totalLines;

function appendLog(text, isFinal=false){
  const line=document.createElement("div");
  line.className=isFinal ? "finalLine" : "logLine";
  line.textContent=isFinal ? `>>> ${text} <<<` : `${timeStamp()} ${text}`;
  logEl.appendChild(line);
  logEl.scrollTop=logEl.scrollHeight;
}

function randomPhrase(){ return technicalPhrases[Math.floor(Math.random()*technicalPhrases.length)]; }

function startLoader(){
  const interval=setInterval(()=>{
    if(displayed < totalLines-1){
      appendLog(randomPhrase());
      displayed++;
      let percent=Math.min(100,(displayed/totalLines)*100);
      progressEl.style.width=percent+"%";
    } else {
      clearInterval(interval);
      // خط آخر متمایز
      appendLog("DASBEM Core successfully initialized. Entering Main Interface.", true);
      progressEl.style.width="100%";
      setTimeout(()=>window.location.href="index.html",800);
    }
  }, intervalTime);
}

startLoader();
</script>
</body>
</html>
