<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>DASBEM Loader</title>
<style>
:root {
  --bg: #000;
  --text: #0f0;
  --accent: #FFD700;
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: var(--bg);
  overflow: hidden;
  font-family: 'Share Tech Mono', monospace;
  color: var(--text);
}

#loader {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: var(--bg);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

#terminal {
  width: 90%;
  max-width: 900px;
  height: 80%;
  background: rgba(0,255,0,0.05);
  border: 1px solid #0f0;
  padding: 15px;
  overflow-y: hidden;
  box-shadow: 0 0 20px #0f0;
  border-radius: 10px;
  font-size: 0.95rem;
  line-height: 1.3em;
}

.log-line {
  opacity: 0;
  animation: fadeIn 0.1s forwards;
  white-space: pre-wrap;
}

@keyframes fadeIn {
  to { opacity: 1; }
}

.highlight {
  color: var(--accent);
  text-shadow: 0 0 8px var(--accent);
  font-weight: bold;
}

#main-content {
  opacity: 0;
  display: none;
  animation: fadeInMain 1.5s forwards;
}

@keyframes fadeInMain {
  to { opacity: 1; }
}
</style>
</head>
<body>

<div id="loader">
  <div id="terminal"></div>
</div>

<div id="main-content">
  <h1 style="color:white; text-align:center; margin-top:40vh;">Welcome to DASBEM</h1>
</div>

<script>
const terminal = document.getElementById('terminal');
const loader = document.getElementById('loader');
const mainContent = document.getElementById('main-content');

const names = [
  "Dr. Mehdi Panji",
  "Dr. Saeed Mojtabazadeh",
  "The DASBEM Project"
];

const modules = ["CORE","SYS","NODE","SOLVER","DATA","VISUAL","AI"];
const operations = ["Loading","Validating","Synchronizing","Exporting","Calculating","Initializing","Processing"];
const params = ["Node","Step","Blk","Amp","Freq","Temp","Res"];

let totalLines = 120;
let currentLine = 0;
const MAX_DOM_LINES = 200;

function getRandomLine() {
  // احتمال نمایش نام شخصی
  if (Math.random() < 0.08) {
    const name = names[Math.floor(Math.random()*names.length)];
    return `<span class='highlight'>${name}</span>`;
  }

  // تولید خط کاملاً تصادفی
  const mod = modules[Math.floor(Math.random()*modules.length)];
  const op = operations[Math.floor(Math.random()*operations.length)];
  const param1 = params[Math.floor(Math.random()*params.length)];
  const param2 = params[Math.floor(Math.random()*params.length)];
  const val1 = Math.floor(Math.random()*999)+1;
  const val2 = (Math.random()*10).toFixed(3);

  return `[${mod}-${Math.floor(Math.random()*9999)}] ${op} ${param1}=${val1} ${param2}=${val2}`;
}

function printNextLine() {
  if (currentLine >= totalLines) {
    setTimeout(() => {
      loader.style.transition = 'opacity 1s';
      loader.style.opacity = 0;
      setTimeout(() => {
        loader.style.display = 'none';
        mainContent.style.display = 'block';
      }, 1000);
    }, 500);
    return;
  }

  const div = document.createElement('div');
  div.className = 'log-line';
  div.innerHTML = getRandomLine();
  terminal.appendChild(div);

  // محدود کردن تعداد خطوط در DOM برای عملکرد بهتر
  if (terminal.children.length > MAX_DOM_LINES) {
    terminal.removeChild(terminal.children[0]);
  }

  terminal.scrollTop = terminal.scrollHeight;
  currentLine++;

  // زمان‌بندی خطوط با سرعت متوسط (کل لودر ~1 دقیقه)
  setTimeout(printNextLine, 500); 
}

window.onload = () => {
  history.replaceState(null, null, "/"); // آدرس ثابت بدون index.html
  printNextLine();
};
</script>

</body>
</html>
