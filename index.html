<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DASBEM Boot Loader</title>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#0d0d0d;
  --text:#00ff00;
  --accent:#ffb347;
  --log-bg:rgba(0,0,0,0.2);
  --bar-bg:#222;
  --bar-fill:#ffb347;
}

body,html{margin:0;padding:0;width:100%;height:100%;background:var(--bg);color:var(--text);font-family:'Source Code Pro', monospace;overflow:hidden;}
#loader-container{position:fixed;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px;padding:20px;}
#loader-header{font-size:2rem;font-weight:700;color:var(--accent);text-shadow:0 0 12px rgba(255,180,120,0.5);}
#time-display{font-size:1rem;color:#aaa;font-family:'Source Code Pro';}
#log-window{background:var(--log-bg);width:90%;max-width:900px;height:300px;border-radius:10px;padding:12px;overflow:hidden;position:relative;}
#log-content{position:absolute;top:0;left:0;right:0;}
.log-entry{white-space:pre;line-height:1.3;margin-bottom:4px;}
#progress-container{width:90%;max-width:900px;height:18px;background:var(--bar-bg);border-radius:9px;overflow:hidden;}
#progress-fill{height:100%;width:0%;background:var(--bar-fill);transition:width 0.2s linear;}
@media(max-width:640px){
  #loader-header{font-size:1.5rem;}
  #log-window{height:200px;}
}
</style>
</head>
<body>
<div id="loader-container">
  <div id="loader-header">Initializing The DASBEM Project...</div>
  <div id="time-display"></div>
  <div id="log-window"><div id="log-content"></div></div>
  <div id="progress-container"><div id="progress-fill"></div></div>
</div>

<script>
// Time & date Iran
function updateTime(){
  const now=new Date();
  const offset=3.5*60; // Iran +3:30
  const utc=now.getTime()+(now.getTimezoneOffset()*60000);
  const iranTime=new Date(utc + (offset*60000));
  const h=String(iranTime.getHours()).padStart(2,'0');
  const m=String(iranTime.getMinutes()).padStart(2,'0');
  const s=String(iranTime.getSeconds()).padStart(2,'0');
  document.getElementById('time-display').textContent=`[${h}:${m}:${s}] Booting...`;
}
setInterval(updateTime,1000);
updateTime();

// Simulated file logs
const logContent=document.getElementById('log-content');
const progressFill=document.getElementById('progress-fill');

const files=[
"Loading boundary element matrices...",
"Initializing SH-wave solver...",
"Applying topography parameters...",
"Computing half-plane responses...",
"Assembling modified BIEs...",
"Solving step-by-step in time domain...",
"Calculating amplification patterns...",
"Generating output files...",
"Updating GUI modules...",
"Finalizing DASBEM Project..."
];

let logIndex=0;
let progress=0;

function appendLog(text){
  const div=document.createElement('div');
  div.className='log-entry';
  div.textContent=text;
  logContent.appendChild(div);
  logContent.style.top = `${-Math.max(0,logContent.scrollHeight-300)}px`; // auto scroll
}

function bootStep(){
  if(logIndex<files.length){
    appendLog(`[INFO] ${files[logIndex]}`);
    progress+=100/files.length;
    progressFill.style.width=`${progress}%`;
    logIndex++;
    const delay=Math.random()*300+200; // random delay per file
    setTimeout(bootStep,delay);
  } else {
    appendLog("[SUCCESS] DASBEM Project Initialized!");
    progressFill.style.width=`100%`;
  }
}

// Background wave effect
const canvas=document.createElement('canvas');
canvas.style.position='fixed';canvas.style.top=0;canvas.style.left=0;
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
canvas.style.zIndex='-1';
document.body.appendChild(canvas);
const ctx=canvas.getContext('2d');
let particles=[];
function initParticles(){
  particles=[];
  for(let i=0;i<150;i++){
    particles.push({
      x:Math.random()*canvas.width,
      y:Math.random()*canvas.height,
      r:Math.random()*2+1,
      vx:(Math.random()-0.5)*0.5,
      vy:(Math.random()-0.5)*0.5
    });
  }
}
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let p of particles){
    ctx.fillStyle=`rgba(255,180,120,0.3)`;
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fill();
    p.x+=p.vx; p.y+=p.vy;
    if(p.x<0||p.x>canvas.width)p.vx*=-1;
    if(p.y<0||p.y>canvas.height)p.vy*=-1;
  }
  requestAnimationFrame(draw);
}
window.addEventListener('resize',()=>{
  canvas.width=window.innerWidth; canvas.height=window.innerHeight;
});
initParticles(); draw();

bootStep();
</script>
</body>
</html>
