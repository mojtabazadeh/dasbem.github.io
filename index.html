<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DASBEM Project</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">

<style>
/* ===== GLOBAL VARIABLES ===== */
:root{
  --bg:#050505;
  --text:#d9d9d9;
  --accent:#ff9900;
  --gold:#ffcc33;
  --green:#39ff14;
  --dark:#0a0a0a;
}

/* ===== RESET ===== */
html,body{
  margin:0;
  padding:0;
  height:100%;
  background:var(--dark);
  color:var(--text);
  font-family:'Outfit',sans-serif;
  overflow-x:hidden;
}

/* ===== LOADER ===== */
#loader{
  position:fixed;
  inset:0;
  z-index:9999;
  background:var(--bg);
  color:var(--green);
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  font-family:'Share Tech Mono', monospace;
  transition:opacity 1s ease, visibility 1s ease;
}

#app{
  display:flex;
  flex-direction:column;
  height:calc(100% - 60px);
  width:calc(100% - 40px);
  padding:30px 20px;
}

#header{
  font-size:18px;
  color:var(--accent);
  margin-bottom:12px;
  user-select:none;
}

.viewport{
  flex:1;
  overflow-y:auto;
  padding:12px 14px;
  background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.03);
}

.logLine{
  font-size:13px;
  line-height:1.25;
  margin:4px 0;
}

.finalLine{
  color:var(--gold);
  font-weight:700;
  font-size:15px;
  margin-top:10px;
  padding:8px 10px;
  border-radius:6px;
  background:linear-gradient(90deg, rgba(255,204,51,0.05), transparent);
  text-shadow:0 0 8px rgba(255,204,51,0.2);
}

.progressWrap{
  height:16px;
  background:rgba(255,255,255,0.06);
  border-radius:10px;
  overflow:hidden;
  margin-top:16px;
  border:1px solid rgba(255,255,255,0.03);
}

.progressBar{
  width:0%;
  height:100%;
  background:linear-gradient(90deg,#ff9900,#ffcc33);
  transition:width 50ms linear;
}

/* ===== MAIN SITE CONTENT ===== */
main{
  opacity:0;
  transition:opacity 1s ease;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background:radial-gradient(circle at top,#0f0f0f,#050505);
}

header{
  position:fixed;
  top:0;
  left:0;
  right:0;
  height:60px;
  background:rgba(10,10,10,0.85);
  backdrop-filter:blur(8px);
  border-bottom:1px solid rgba(255,255,255,0.06);
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--accent);
  font-family:'Share Tech Mono', monospace;
  letter-spacing:2px;
  z-index:1000;
}

section{
  text-align:center;
  max-width:800px;
  padding:100px 20px 60px;
}

h1{
  font-size:2.4rem;
  color:var(--gold);
  text-shadow:0 0 10px rgba(255,204,51,0.15);
  margin-bottom:10px;
}
p{
  line-height:1.6;
  font-size:1.1rem;
  opacity:0.85;
}
footer{
  text-align:center;
  padding:30px 10px;
  font-size:0.9rem;
  opacity:0.7;
  border-top:1px solid rgba(255,255,255,0.05);
}

/* ===== RESPONSIVE ===== */
@media(max-width:640px){
  #header{font-size:16px;}
  .logLine{font-size:12px;}
  .progressWrap{height:14px;}
  h1{font-size:1.9rem;}
}
</style>
</head>

<body>

<!-- ===== LOADER SECTION ===== -->
<div id="loader">
  <div id="app">
    <div id="header">Initializing The DASBEM Project Core...</div>
    <div class="viewport" id="viewport"></div>
    <div class="progressWrap"><div class="progressBar" id="progressBar"></div></div>
  </div>
</div>

<!-- ===== SITE CONTENT ===== -->
<header>DASBEM PROJECT</header>

<main>
  <section>
    <h1>Welcome to the DASBEM Project</h1>
    <p>
      The DASBEM Project represents an advanced computational platform for dynamic analysis of seismic boundary element models.
      It integrates optimized half-space fundamental solutions with high-precision transient wave propagation algorithms.
    </p>
    <p>
      Our mission is to push the limits of urban-scale elastodynamic simulations while enabling efficient energy capture and
      environmental modeling under realistic geological conditions.
    </p>
  </section>
</main>

<footer>
  © 2025 The DASBEM Project — Developed by Dr. Saeed Mojtabazadeh & Dr. Mehdi Panji
</footer>

<!-- ===== SCRIPT SECTION ===== -->
<script>
const TOTAL_DURATION = 4000; // زمان لودر
const FINAL_DELAY = 1800;    // توقف بیشتر برای خط آخر
const TOTAL_LINES = 350;

const viewport = document.getElementById('viewport');
const progressBar = document.getElementById('progressBar');

function rnd(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }
function pick(arr){ return arr[rnd(0,arr.length-1)]; }

const stages = [
  "Initializing computational kernel...",
  "Loading half-space fundamental solution coefficients...",
  "Reading boundary element matrices...",
  "Assembling influence coefficients...",
  "Integrating transient SH-wave responses...",
  "Applying free-surface boundary conditions...",
  "Computing displacement and stress vectors...",
  "Optimizing recursive convolution windows...",
  "Storing intermediate snapshots...",
  "Finalizing time-domain solver...",
  "Evaluating elastodynamic Green's functions [G{rnd}]...",
  "Performing LU factorization on influence submatrix {sub}...",
  "Computing boundary integral for SH-wave field [SH{rnd}].res...",
  "Synchronizing half-space radiation conditions...",
  "Post-processing spectral amplification map [AMP{rnd}].amp...",
  "Loading convolution memory blocks {blk} of {totalBlk}...",
  "Applying non-reflective boundary matrix at edge {edge}...",
  "Transforming local to global coordinate system '{coordSys}'...",
  "Storing intermediate response snapshot [RS{rnd}].bin...",
  "Validating HSTD-BEM residuals (tolerance={tol})...",
  "Exporting motion history segment [MH{rnd}].out...",
  "Initializing recursive time-domain solver module '{mod}'..."
];

function makeLine(){
  const stage = pick(stages);
  let extra = "";
  if(stage.includes("coefficients") || stage.includes("matrices")) extra = " [F"+rnd(1000,9999)+".bin]";
  if(stage.includes("snapshots") || stage.includes("response")) extra = " [S"+rnd(100,999)+"]";
  if(stage.includes("convolution") || stage.includes("memory")) extra = " window="+rnd(10,500)+"ms";
  if(stage.includes("displacement") || stage.includes("stress") || stage.includes("SH-wave")) extra = " Node"+rnd(10,999);
  if(stage.includes("Green's functions")) extra = " [G"+rnd(1000,9999)+".dat]";
  if(stage.includes("spectral amplification")) extra = " [AMP"+rnd(10,99)+"]";
  if(stage.includes("motion history")) extra = " [MH"+rnd(1000,9999)+".out]";
  if(stage.includes("recursive time-domain solver")) extra = " Module-"+pick(["kern","conv","io","solver","post"]);
  return stage.replace(/\{rnd\}/g, () => rnd(1000,9999))
              .replace(/\{sub\}/g, () => "K"+rnd(1,99))
              .replace(/\{blk\}/g, () => rnd(1,24))
              .replace(/\{totalBlk\}/g, () => rnd(24,128))
              .replace(/\{edge\}/g, () => rnd(0,7))
              .replace(/\{coordSys\}/g, () => pick(["local","global","geo"]))
              .replace(/\{tol\}/g, () => (Math.random()*1e-3).toExponential(2))
              + extra;
}

let loadedCount = 0;
function pushLine(text, final=false){
  const el = document.createElement('div');
  el.className = 'logLine';
  if(final) el.classList.add('finalLine');
  el.textContent = text;
  viewport.appendChild(el);
  while(viewport.children.length>220) viewport.removeChild(viewport.children[0]);
  viewport.scrollTop = viewport.scrollHeight;
  loadedCount++;
  const pct = Math.min(100, Math.round((loadedCount/TOTAL_LINES)*100));
  progressBar.style.width = pct+"%";
}

const timestamps = Array.from({length:TOTAL_LINES}, (_,i)=>{
  const base = (i/TOTAL_LINES)*TOTAL_DURATION;
  const jitter = (1 - Math.abs(i/TOTAL_LINES-0.5)*2)*30;
  return base + (Math.random()*jitter*2 - jitter);
});

function startLoader(){
  for(let i=0;i<TOTAL_LINES;i++){
    setTimeout(()=>{ pushLine(makeLine()); }, timestamps[i]);
  }

  setTimeout(()=>{
    pushLine("DASBEM Core successfully initialized. Entering Main Interface.", true);
    setTimeout(()=>{
      const loader = document.getElementById('loader');
      const main = document.querySelector('main');
      loader.style.opacity = 0;
      loader.style.visibility = "hidden";
      setTimeout(()=> loader.remove(), 900);
      main.style.opacity = 1; // نمایش محتوای سایت
    }, FINAL_DELAY);
  }, TOTAL_DURATION+300);
}

window.addEventListener("load", startLoader);
</script>

</body>
</html>
