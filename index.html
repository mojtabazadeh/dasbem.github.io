<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DASBEM Loader</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#050505;
  --text:#39ff14;
  --accent:#ff9900;
  --highlight:#ffcc33;
}

html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  background:var(--bg);
  color:var(--text);
  font-family:'Share Tech Mono', monospace;
  overflow:hidden;
}

#loaderContainer {
  position:relative;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  height:100%;
  width:100%;
  padding:20px;
  box-sizing:border-box;
  z-index:2;
}

#header {
  font-size:18px;
  color:var(--accent);
  letter-spacing:1px;
  margin-bottom:10px;
}

#log {
  flex:1;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  font-size:14px;
  line-height:1.3em;
  white-space:pre-wrap;
}

.logLine {
  opacity:0;
  animation: fadeIn 0.15s linear forwards;
}

.finalLine {
  color:var(--highlight);
  font-weight:bold;
  font-size:16px;
  text-shadow:0 0 4px var(--highlight);
  margin-top:5px;
}

@keyframes fadeIn {from {opacity:0; transform:translateY(2px);} to {opacity:1; transform:translateY(0);}}

.progressBarContainer {
  width:100%;
  height:18px;
  background:rgba(255,255,255,0.08);
  border-radius:8px;
  overflow:hidden;
  margin-top:10px;
}

.progressBar {
  width:0;
  height:100%;
  background:linear-gradient(90deg, #ff9900, #ffcc33);
  transition:width 0.1s linear;
}

.grid {
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  background-image:linear-gradient(rgba(255,153,0,0.08) 1px, transparent 1px),
                   linear-gradient(90deg, rgba(255,204,51,0.08) 1px, transparent 1px);
  background-size:20px 20px;
  animation:gridMove 3s linear infinite;
  z-index:0;
}

@keyframes gridMove {0% {background-position:0 0;}100% {background-position:20px 20px;}}

.glowWave {
  position:absolute;
  bottom:-50%;
  width:200%;
  height:200%;
  background:radial-gradient(circle at 50% 120%, rgba(255,153,0,0.12), transparent 70%);
  animation:pulseWave 6s ease-in-out infinite;
  z-index:0;
}

@keyframes pulseWave {
  0%,100%{transform:translateY(0) scale(1);opacity:0.5;}
  50%{transform:translateY(-10%) scale(1.05);opacity:1;}
}

@media(max-width:640px){
  #header{font-size:15px;text-align:center;}
  #log{font-size:11px;}
  .progressBarContainer{height:12px;border-radius:5px;}
  #loaderContainer{padding:10px;}
}
</style>
</head>
<body>
<div class="grid"></div>
<div class="glowWave"></div>

<div id="loaderContainer">
  <div id="header">Initializing The DASBEM Project Core...</div>
  <div id="log"></div>
  <div class="progressBarContainer"><div class="progressBar" id="progressBar"></div></div>
</div>

<script>
function tehranTime(){const now=new Date(); const utc=now.getTime()+now.getTimezoneOffset()*60000; return new Date(utc+3.5*60*60*1000);}
function timeStamp(){const t=tehranTime(); return `[${('0'+t.getHours()).slice(-2)}:${('0'+t.getMinutes()).slice(-2)}:${('0'+t.getSeconds()).slice(-2)}]`;}

// لیست واقعی و گسترده از خطوط تخصصی با تنوع زیاد
const technicalPhrases=[];
for(let i=0;i<600;i++){
  const modules=[
    "Assembling dynamic stiffness matrix","Computing convolution kernel",
    "Applying recursive boundary update","Integrating SH-wave Green’s function",
    "Evaluating transient boundary response","Synchronizing global solver thread",
    "Performing LU decomposition","Validating boundary equilibrium condition",
    "Updating displacement and stress vectors","Executing time-domain integration step",
    "Allocating memory block for nodal response","Normalizing influence coefficients",
    "Adjusting time increment Δt","Computing half-space reflection factor",
    "Building element connectivity list","Updating Jacobian determinants",
    "Recomputing fundamental solution for node "+Math.floor(Math.random()*200),
    "Writing results to DASBEM_core/cache.tmp","Clearing temporary convolution data",
    "Applying free-surface constraint matrix","Verifying solver stability criterion",
    "Optimizing BEM matrix storage pattern","Synchronizing output data stream"
  ];
  technicalPhrases.push(modules[Math.floor(Math.random()*modules.length)]+"...");
}

const logEl=document.getElementById("log");
const progressEl=document.getElementById("progressBar");

let displayed=0;
let totalLines=technicalPhrases.length;
let startTime=performance.now();
let duration=Math.random()*5000+6000; // بین 6 تا 11 ثانیه

function randomInterval(min,max){return Math.random()*(max-min)+min;}

function appendLog(text,isFinal=false){
  const line=document.createElement("div");
  line.className=isFinal?"finalLine":"logLine";
  line.textContent=isFinal?`>>> ${text} <<<`:`${timeStamp()} ${text}`;
  logEl.appendChild(line);
  logEl.scrollTop=logEl.scrollHeight;
}

function nextLine(){
  if(displayed<totalLines){
    appendLog(technicalPhrases[displayed]);
    displayed++;
    let progress=(displayed/totalLines)*100;
    progressEl.style.width=progress+"%";

    // سرعت تصادفی واقعی: گاهی مکث، گاهی سریع
    let interval = randomInterval(2,8);
    if(Math.random()<0.02) interval = randomInterval(100,250); // توقف‌های طبیعی سیستم

    setTimeout(nextLine, interval);
  }else{
    appendLog("DASBEM Core successfully initialized. Entering Main Interface.",true);
    progressEl.style.width="100%";
    setTimeout(()=>window.location.href="index.html",1200);
  }
}

nextLine();
</script>
</body>
</html>
