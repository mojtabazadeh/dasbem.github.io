<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DASBEM Loader</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#050505;
    --text:#39ff14;
    --accent:#ff9900;
    --gold:#ffcc33;
    --muted: rgba(255,255,255,0.06);
  }

  *{box-sizing:border-box;}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:'Share Tech Mono',monospace;overflow:hidden;}
  
  /* Loader container full screen */
  #loader{
    position:fixed;
    inset:0;
    display:flex;
    flex-direction:column;
    padding:18px;
    gap:12px;
    justify-content:flex-start;
    align-items:flex-start;
    transition:opacity 0.8s ease;
    z-index:9999;
  }

  #header{
    font-size:17px;
    color:var(--accent);
    letter-spacing:1px;
    user-select:none;
    max-width:100%;
    overflow:hidden;
    white-space:nowrap;
  }

  .viewport{
    flex:1;
    width:100%;
    overflow-y:auto;
    padding:10px 12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.03);
  }

  .logLine{
    font-size:13px;
    line-height:1.25;
    margin:4px 0;
    opacity:0;
    transform:translateY(4px);
    transition:opacity .12s linear, transform .12s linear;
    max-width:100%;
    word-break:break-word;
    white-space:pre-wrap;
    display:block;
  }

  .logLine.visible{
    opacity:1; 
    transform:translateY(0);
  }

  .finalLine{
    color:var(--gold);
    font-weight:700;
    font-size:15px;
    text-shadow:0 0 6px rgba(255,204,51,0.14);
    margin-top:8px;
    padding:6px 8px;
    border-radius:6px;
    background:linear-gradient(90deg, rgba(255,204,51,0.04), transparent);
  }

  .progressWrap{
    height:16px;
    background:rgba(255,255,255,0.06);
    border-radius:10px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,0.03);
    width:100%;
  }

  .progressBar{
    height:100%;
    width:0;
    background:linear-gradient(90deg,#ff9900,#ffcc33);
    transition:width 80ms linear;
  }

  /* full screen subtle grid & glow */
  .grid{
    pointer-events:none;
    position:fixed;inset:0;z-index:-1;
    background-image:
      linear-gradient(rgba(255,153,0,0.06) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,204,51,0.05) 1px, transparent 1px);
    background-size:18px 18px;
    mix-blend-mode:overlay;
    opacity:0.65;
  }

  .glow{
    pointer-events:none;
    position:fixed;
    left:50%;
    transform:translateX(-50%);
    bottom:-40%;
    width:160%;
    height:160%;
    background:radial-gradient(circle at 50% 120%, rgba(255,153,0,0.12), transparent 60%);
    z-index:-1;
    opacity:0.9;
  }

  /* main content hidden initially */
  #mainContent{
    opacity:0;
    transition:opacity 1s ease;
  }

  /* mobile tweaks */
  @media (max-width:640px){
    #loader{padding:12px;}
    #header{font-size:15px;}
    .logLine{font-size:12px;margin:6px 0;}
    .progressWrap{height:14px;}
  }
</style>
</head>
<body>
  <div class="grid" aria-hidden="true"></div>
  <div class="glow" aria-hidden="true"></div>

  <div id="loader" role="main" aria-live="polite">
    <div id="header">Initializing The DASBEM Project Core...</div>
    <div class="viewport" id="viewport" role="region" aria-label="Loader log"></div>
    <div class="progressWrap"><div class="progressBar" id="progressBar"></div></div>
  </div>

  <div id="mainContent">
    <!-- صفحه اصلی سایت شما -->
    <h1>Welcome to DASBEM Project</h1>
    <p>این صفحه بعد از لود کامل سایت نمایش داده می‌شود.</p>
  </div>

<script>
/* --------------------------
   تنظیمات
-------------------------- */
const TOTAL_DURATION = 3000; // مدت زمان لودر
const TOTAL_LINES = 60;      // تعداد خطوط لود
const viewport = document.getElementById('viewport');
const progressBar = document.getElementById('progressBar');
const loader = document.getElementById('loader');
const mainContent = document.getElementById('mainContent');

/* --------------------------
   فایل‌ها و فرمت‌ها
-------------------------- */
const fileFormats = ['.dat','.bin','.inp','.cfg','.log','.out','.res','.mod','.mesh'];
const fileNames = ['kernel','solver','conv','core','matrix','boundary','history','snapshot','amplify','response'];

function rnd(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }
function pick(arr){ return arr[rnd(0,arr.length-1)]; }

/* تولید یک خط لود */
function makeLine(){
  const name = pick(fileNames);
  const ext = pick(fileFormats);
  const size = rnd(4,2048)+' KB';
  return `Loading ${name}${ext} (${size})...`;
}

/* اضافه کردن خط به ویوپورت */
function pushLine(text){
  const el = document.createElement('div');
  el.className='logLine';
  el.textContent = text;
  viewport.appendChild(el);
  while(viewport.children.length > 100) viewport.removeChild(viewport.children[0]);
  requestAnimationFrame(()=> el.classList.add('visible'));
  viewport.scrollTop = viewport.scrollHeight;
}

/* --------------------------
   برنامه‌ریزی زمان‌بندی خطوط
-------------------------- */
const timestamps = [];
for(let i=0;i<TOTAL_LINES;i++){
  timestamps.push(i*(TOTAL_DURATION/TOTAL_LINES));
}

/* شروع لود */
let startedAt = performance.now();
function updateProgress(){
  const elapsed = performance.now()-startedAt;
  progressBar.style.width = Math.min(100,(elapsed/TOTAL_DURATION)*100)+'%';
}

timestamps.forEach((t)=>{
  setTimeout(()=>{ pushLine(makeLine()); }, t);
});

const progressTicker = setInterval(updateProgress,20);

/* پایان لود و نمایش صفحه اصلی */
setTimeout(()=>{
  clearInterval(progressTicker);
  progressBar.style.width='100%';
  pushLine("DASBEM Protocol Engaged.", true);
  loader.style.opacity='0';
  setTimeout(()=> mainContent.style.opacity='1',800);
}, TOTAL_DURATION);
</script>
</body>
</html>
